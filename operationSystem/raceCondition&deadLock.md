# 경쟁 상태(Race condition)과 교착 상태(Dead Lock)

## 경쟁 상태(Race condition)이란?

간단하게 얘기하면 프로세스가 같은 공유 데이터를 접근할 때 순서에 따라 결과값에 영향을 준다면, 즉 순서에 따라 결과가 영향을 줄 때 프로세스들이 동시에 공유 데이터에 접근을 할 때 이를 경쟁 상태(`Race condition`)에 있다고 이야기 한다.

## 교착 상태(Dead lock)이란?

둘 이상의 프로세스가 자원을 점유한 상태에서 다른 프로세스가 점유하고 있는 상테에서 다른 자원을 요청할 때 블락(`Block`)되어 무한정 `wait` 상태에 있는 것을 말합니다.

이러한 교착 상태는 아래의 4가지 조건이 있어야 발생한다.

1.  상호 배제(`Mutual exclusion`)

    한 번에 프로세스 하나만 자원을 사용할 수 있게 하는 것을 의미한다.

2.  점유 대기(`Hold and wait`)

    자원을 최소한 하나이상 보유하고 다른 프로세스에 할당된 자원을 얻으려고 대기하고 있는 것을 의미한다.

3.  비선점(`No preemption`)

    자원을 강제로 빼앗을 수 없으며, 자원을 선점하고 있는 프로세스가 끝나야 해제되는, 즉 자원을 선점할 수 없는 것을 의미한다.

4.  순환 대기(`Circular wait`)

    프로세스들이 대기하고 있을 때 각 프로세스는 자신에게 할당된 자원을 점유하고 있고 다음 프로세스의 자원을 얻기 위해 기다리고 있는 것을 의미한다.

## 교착 상태와 경쟁 상태의 차이

경쟁 상태와 교착 상태는 언뜻 보면 비슷해 보일 수 있는데 경쟁 상태는 공유된 자원에 대해서 동시에 쓸 때에 발생한다. 그래서 임계 영역을 두어 한 순간에 하나의 프로세스만 두는 상호배제를 이용하여 이를 해결하지만

교착 상태는 위의 4가지 조건을 만족할 때 발생한다는 것을 본다면 경쟁 상태는 교착 상태의 일종이라고 말할 수 있을 것으로 생각한다. 데드락은 4가지 조건을 만족한다면 외부의 개입이나 무시를 하지 않는 이상은 해결이 힘들다는 것이 경쟁 상태와의 차이라고 볼 수 있다.

그렇지만 경쟁 상태는 상호배제를 통해, 데드락은 회피(`avoidance`)를 통해 둘다 이러한 상태를 예방 및 회피하기에 비슷하다고 볼 수 있다.

## 참고자료

> https://gyoogle.dev/blog/computer-science/operating-system/DeadLock.html

> 한빛아카데미사의 그림으로 배우는 구조와 원리 운영체제
